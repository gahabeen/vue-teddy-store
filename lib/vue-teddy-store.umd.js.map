{"version":3,"file":"vue-teddy-store.umd.js","sources":["../src/utils.js","../src/plugins/cache.js","../src/plugins/history.js","../src/plugins/sync.js","../src/index.js"],"sourcesContent":["const VARIABLE_PATH = /({.+?})/gim\r\n\r\nfunction resolvePath(instance) {\r\n  return (path) => {\r\n    const variablePath = get(instance, path.slice(1, -1).trim())\r\n    if (['string', 'number'].includes(typeof variablePath)) {\r\n      return variablePath\r\n    } else {\r\n      /* istanbul ignore next */\r\n      throw new Error`Couldn't not find any proper value for ${variablePath}`()\r\n    }\r\n  }\r\n}\r\n\r\nexport function debounce(fn, wait = 100) {\r\n  let timeout\r\n  return function(...args) {\r\n    clearTimeout(timeout)\r\n    timeout = setTimeout(() => {\r\n      fn.apply(this, args)\r\n    }, wait)\r\n  }\r\n}\r\n\r\nexport function get(obj, path, defaultValue, instance) {\r\n  return String(path)\r\n    .replace(/\\[/g, '.')\r\n    .replace(/]/g, '')\r\n    .replace(VARIABLE_PATH, resolvePath(instance))\r\n    .split('.')\r\n    .reduce((acc, v) => {\r\n      try {\r\n        acc = acc[v] === undefined ? defaultValue : acc[v]\r\n      } catch (e) {\r\n        /* istanbul ignore next */\r\n        return defaultValue\r\n      }\r\n      return acc\r\n    }, obj)\r\n}\r\n\r\nexport function set(obj, path, value, instance) {\r\n  const steps = String(path)\r\n    .replace(/\\[/g, '.')\r\n    .replace(/]/g, '')\r\n    .replace(VARIABLE_PATH, resolvePath(instance))\r\n    .split('.')\r\n\r\n  const cleanStep = (key) => key.replace(/^\\^/, '')\r\n\r\n  const _set = (item, steps, val) => {\r\n    const step = steps.shift()\r\n    if (steps.length > 0) {\r\n      if (Number.isInteger(+steps[0])) {\r\n        item[step] = []\r\n        return _set(item[step], steps, val)\r\n      } else if (!item[step]) {\r\n        // To force an integer as an object property, prefix it with ^\r\n        // If somehow you want to have a ^ in a key name, double it ^^\r\n        item[cleanStep(step)] = {}\r\n        return _set(item[cleanStep(step)], steps, val)\r\n      }\r\n    } else {\r\n      item[cleanStep(step)] = val\r\n    }\r\n  }\r\n\r\n  _set(obj, steps, value)\r\n\r\n  return obj\r\n}\r\n","import { watch } from '@vue/composition-api'\r\nimport { debounce } from '../utils'\r\n\r\nexport const prefix = (name) => `teddy:store:${name}`\r\nexport default {\r\n  handle({ name, store }) {\r\n    /* istanbul ignore next */\r\n    const localStorage = window.localStorage || global.localStorage || {}\r\n    /* istanbul ignore next */\r\n    if (localStorage) {\r\n      // Fetched saved state when exists\r\n      const cached = localStorage.getItem(prefix(name))\r\n      if (cached) store._state = { ...store._state, ...JSON.parse(cached) }\r\n      // Watch for mutations, save them\r\n      watch(\r\n        store._state,\r\n        debounce((newState, oldState) => {\r\n          if (newState !== oldState) {\r\n            localStorage.setItem(prefix(name), JSON.stringify(newState))\r\n          }\r\n        }, 500),\r\n        { immediate: true, deep: true }\r\n      )\r\n    }\r\n  },\r\n}\r\n","import { reactive, watch } from '@vue/composition-api'\r\n\r\nexport default {\r\n  handle({ store }) {\r\n    store._history = reactive([])\r\n    watch(\r\n      store._state,\r\n      (newState) => {\r\n        store._history.push(newState)\r\n      },\r\n      { immediate: true, deep: true }\r\n    )\r\n  },\r\n}\r\n","import { reactive } from '@vue/composition-api'\r\nimport { prefix } from './cache'\r\n\r\nexport default {\r\n  handle({ name, store }) {\r\n    /* istanbul ignore next */\r\n    if (window) {\r\n      window.addEventListener('storage', (e) => {\r\n        if (e.key === prefix(name)) {\r\n          store._state = reactive({ ...store._state, ...JSON.parse(e.newValue) })\r\n        }\r\n      })\r\n    }\r\n  },\r\n}\r\n","import { computed, reactive, ref, isRef, watch } from '@vue/composition-api'\r\n\r\nimport * as utils from './utils'\r\n\r\nimport CachePlugin from './plugins/cache'\r\nimport HistoryPlugin from './plugins/history'\r\nimport SyncPlugin from './plugins/sync'\r\n\r\nfunction getInstance(...solutions) {\r\n  const instanceSolution = solutions.find((s) => s && s instanceof TeddyStore)\r\n  const contextSolution = solutions.find((s) => s && '$teddy' in s && s.$teddy instanceof TeddyStore)\r\n  const solution = instanceSolution || (contextSolution ? contextSolution.$teddy : undefined)\r\n  if (!solution) {\r\n    /* istanbul ignore next */\r\n    throw new Error(`Couldn't find any proper instance!`)\r\n  }\r\n  return solution\r\n}\r\n\r\nexport default class TeddyStore {\r\n  constructor() {\r\n    this._stores = reactive({})\r\n    this._plugins = reactive({\r\n      cache: CachePlugin,\r\n      history: HistoryPlugin,\r\n      sync: SyncPlugin,\r\n    })\r\n  }\r\n\r\n  add(name, store) {\r\n    // eslint-disable-next-line no-unused-vars\r\n    const { _state: A, state: B, methods: C, watchers: D, ...others } = store\r\n\r\n    const { _state, state } = TeddyStore.createState(store._state || store.state || {})\r\n    this._stores = {\r\n      ...this._stores,\r\n      [name]: reactive({\r\n        _state,\r\n        state,\r\n        ...(store.methods || {}),\r\n        ...others,\r\n      }),\r\n    }\r\n\r\n    const watchers = []\r\n    if (Array.isArray(store.watchers)) {\r\n      watchers.push(...store.watchers)\r\n    } else if (store.watcher) {\r\n      watchers.push(store.watcher)\r\n    }\r\n\r\n    for (let watcher of watchers) {\r\n      if (typeof watcher === 'function') {\r\n        watch(this._stores[name].state, watcher, { deep: true })\r\n      } else if (watcher && typeof watcher === 'object' && 'handler' in watcher) {\r\n        const { handler, path, paths = [], ...options } = watcher\r\n        if (path) {\r\n          // console.log(\"utils.get(this._stores[name].state, path)\", utils.get(this._stores[name].state, path));\r\n          watch(() => utils.get(this._stores[name].state, path), handler, { deep: true, ...options })\r\n        } else if (paths.length > 0) {\r\n          watch(\r\n            paths.map((p) => () => utils.get(this._stores[name].state, p)),\r\n            handler,\r\n            { deep: true, ...options }\r\n          )\r\n        } else {\r\n          watch(() => this._stores[name].state, handler, { deep: true, ...options })\r\n        }\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  use(plugin = {}) {\r\n    if (typeof plugin.install === 'function') plugin.install(this)\r\n    if (typeof plugin.handle === 'function') Object.keys(this._stores).map((name) => plugin.handle.call(this, { name, store: this._stores[name] }))\r\n    return this\r\n  }\r\n\r\n  activate(pluginNames = []) {\r\n    if (!Array.isArray(pluginNames)) pluginNames = [pluginNames]\r\n    for (let pluginName of pluginNames) {\r\n      if (pluginName in this._plugins) {\r\n        this.use(this._plugins[pluginName])\r\n      }\r\n    }\r\n    return this\r\n  }\r\n\r\n  install(VueInstance) {\r\n    VueInstance.prototype.$Teddy = TeddyStore\r\n    VueInstance.prototype.$teddy = this\r\n  }\r\n\r\n  get stores() {\r\n    return this._stores\r\n  }\r\n\r\n  static createState(stateObj = {}) {\r\n    const _state = isRef(stateObj) ? stateObj : ref(stateObj)\r\n    /* Until it's made available by Vue 3, be careful with { state } as it can be deeply mutable*/\r\n    // const state = readonly(() => _state.value)\r\n    const state = computed(() => _state.value)\r\n    return { _state, state }\r\n  }\r\n\r\n  get(name, path) {\r\n    return TeddyStore.get.call(this, name, path)\r\n  }\r\n\r\n  static get(name, path, context) {\r\n    context = context || this\r\n    return function get() {\r\n      const _instance = getInstance(this, context)\r\n      try {\r\n        return utils.get(_instance.stores[name].state, path, undefined, context)\r\n      } catch (error) {\r\n        /* istanbul ignore next */\r\n        throw new Error(`Couldn't compute (get) path '${path}' for '${name}'`)\r\n      }\r\n    }\r\n  }\r\n\r\n  set(name, path) {\r\n    return TeddyStore.set.call(this, name, path)\r\n  }\r\n\r\n  static set(name, path, context) {\r\n    context = context || this\r\n    return function set(value) {\r\n      const _instance = getInstance(this, context)\r\n      try {\r\n        utils.set(_instance.stores[name]._state, path, value, context)\r\n      } catch (error) {\r\n        /* istanbul ignore next */\r\n        throw new Error(`Couldn't compute (set) path '${path}' for '${name}'`)\r\n      }\r\n    }\r\n  }\r\n\r\n  compute(name, path) {\r\n    return TeddyStore.compute.call(this, name, path)\r\n  }\r\n\r\n  static compute(name, path) {\r\n    const get = TeddyStore.get.call(this, name, path)\r\n    const set = TeddyStore.set.call(this, name, path)\r\n    return {\r\n      get,\r\n      set,\r\n    }\r\n  }\r\n}\r\n"],"names":["const","let","this","watch","reactive","utils.get","isRef","ref","computed","get","set","utils.set"],"mappings":"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"}