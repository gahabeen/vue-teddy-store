/*!
  * vue-teddy-store v0.5.22
  * (c) 2020 Gabin Desserprit
  * @license MIT
  */
/*!
  * vue-teddy-store v0.5.22
  * (c) 2020 Gabin Desserprit
  * @license MIT
  */
var VueTeddyStore=function(e,t,s,r,n,o,a,c,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var u="default"in s?s.default:s;n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const p=(e,t)=>`teddy:${e}:${t}`;var f={store(e,s){const r=Pe({space:e,name:s});if(r.features.cache)return;const n=window.localStorage||global.localStorage||{};if(n){const o=n.getItem(p(e,s));o&&(r.state=JSON.parse(o)),ee({space:e,name:s},{handler:t(t=>{n.setItem(p(e,s),JSON.stringify(t))},200),immediate:!0,deep:!0}),r.features.cache=!0}}},l={store(e,t){const r=Pe({space:e,name:t});r.features.history||(r.features.history={},r.features.history.stack=s.reactive([]),ee({space:e,name:t},{handler(e){r.features.history.stack.push({state:e,ts:(new Date).getTime()})},immediate:!0,deep:!0}),r.features.history.installed=!0)}},d={store(e,s){const r=Pe({space:e,name:s});r.features.sync||(r.features.sync={},window&&window.addEventListener("storage",t(t=>{t.key===p(e,s)&&(r.state={...r.state,...JSON.parse(t.newValue)})},200)),r.features.sync.installed=!0)}},h=Object.freeze({__proto__:null,cache:f,history:l,sync:d});function y(e){if(!r.isObject(e)||r.isObject(e)&&!("value"in e))return!1;return"function"==typeof Object.getOwnPropertyDescriptor(e,"value").get}const m=(e={})=>{const t=e.__ob__;return()=>{t&&t.dep.notify()}};function g(e,t,n){const o=s.isRef(e);return function(e){const t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}(t)||r.isValidKey(t)?o?(s.set(e.value,t,n),e.value[t]):(s.set(e,t,n),e[t]):o?(e.value=n,e.value):e=n}function v(e,t){if(r.isObject(e)||Array.isArray(e))return r.isValidKey(t)?s.isRef(e)?e.value[t]:e[t]:s.isRef(e)?e.value:e}function P(e,t){return!(!r.isObject(e)&&!Array.isArray(e))&&(!!r.isValidKey(t)&&(!!(y(e)&&e.value&&t in e.value)||(!(!e||!(t in e))||void 0)))}function S(e,t){const r=s.unref(e),n=s.isRef(e),o=m(e);if(Array.isArray(r))return n?(e.value.push(t),o(),e.value.slice(-1)[0]):(e.push(t),o(),e.slice(-1)[0])}function b(e,t){const r=s.unref(e),n=s.isRef(e);if(Array.isArray(r))return n?(e.value.unshift(t),e.value):(e.unshift(t),e)}function k(e,t,r){const n=s.unref(e),o=s.isRef(e),a=m(e);if(Array.isArray(n))return o?(e.value.splice(t,0,r),a(),e.value):(e.splice(t,0,r),a(),e)}function O(e=[]){return"_state"!==e[0]?["_state",...e]:e}const j=r.makeSet({setProp:g,getProp:v,hasProp:P,afterGetSteps:O}),w=r.makeHas({getProp:v,hasProp:P,afterGetSteps:O}),A=r.makeGet({getProp:v,hasProp:P,afterGetSteps:O}),_=r.makeRemove({getProp:v,hasProp:P,removeProp:function(e,t){const n=s.unref(e),o=s.isRef(e),a=m(e);return Array.isArray(n)?(o?e.value.splice(+t,1):e.splice(+t,1),a(),!0):!!r.isObject(n)&&(o?e.value=function(e,t=[]){return Object.keys(e).reduce((s,r)=>(t.includes(r)||(s[r]=e[r]),s),{})}(e.value,[t]):delete e[t],a(),!0)},afterGetSteps:O}),T=r.makePush({getProp:v,hasProp:P,pushProp:S,afterGetSteps:O}),G=r.makeUnshift({getProp:v,hasProp:P,unshiftProp:b,afterGetSteps:O}),$=r.makeInsert({getProp:v,hasProp:P,insertProp:k,afterGetSteps:O}),R=r.makeSet({setProp:g,getProp:v,hasProp:P}),V=r.makeHas({getProp:v,hasProp:P}),W=r.makeGet({getProp:v,hasProp:P}),I=r.makeRemove({getProp:v,hasProp:P}),F=r.makePush({getProp:v,hasProp:P,pushProp:S}),H=r.makeUnshift({getProp:v,hasProp:P,unshiftProp:b}),x=r.makeInsert({getProp:v,hasProp:P,insertProp:k});var z=Object.freeze({__proto__:null,teddySet:j,teddyHas:w,teddyGet:A,teddyRemove:_,teddyPush:T,teddyUnshift:G,teddyInsert:$,set:R,has:V,get:W,remove:I,push:F,unshift:H,insert:x});n.use(u);const C=Symbol(),J=Symbol(),K={__options:{devtools:!0},spaces:{}},M="$",N="@",U=e=>{let t,s;if(r.isObject(e))t="space"in e?e.space:M,s="name"in e?e.name:N;else if("string"==typeof e)if(e.includes(".")){let[r,n]=e.split(".");t=r,s=n}else if(e.includes("/")){let[r,n]=e.split("/");t=r,s=n}else t=M,s=e;return"string"==typeof t&&(t=t.trim(),0===t.length&&(t=void 0)),"string"==typeof s&&(s=s.trim(),0===s.length&&(s=void 0)),{space:t,name:s}},D=(e,t)=>{const s=U(e);t=t||{};const r=Pe(s);return E(s,t.state),Q(s,t.getters),Y(s,t.actions),ee(s,t.watchers),r},q=(e,t)=>s.isRef(t)?t:s.ref(t),B=(e,t,s={})=>(s._state=q(0,t),"state"in s||Object.defineProperty(s,"state",{get:()=>s._state.value,set:e=>{s._state.value=e},enumerable:!0}),s),E=(e,t)=>{const s=Pe(e);B(0,t,s)},L=(e,t)=>{const s=Pe(e);return t=t||{},Object.keys(t).reduce((e,r)=>(y(t[r])?e[r]=t[r]:"function"==typeof t[r]&&(a(t[r]).length>1?e[r]=function(...e){const n=c(i(e)),o=`__${r}_${n}`;return o in this||(this[o]=je(()=>t[r](s,...e))),this[o]}:e[r]=je(()=>t[r](s))),e),{})},Q=(e,t)=>{const s=Pe(e);return s.getters={...s.getters||{},...L(e,t)},s},X=(e,t)=>{const s=Pe(e);return t=t||{},Object.keys(t).reduce((e,r)=>("function"==typeof t[r]&&(e[r]=(...e)=>t[r](s,...e)),e),{})},Y=(e,t)=>{const s=Pe(e);return s.actions={...s.actions||{},...X(e,t)},s},Z=(e,r)=>{const{name:n}=U(e),a=Pe(e),c=[];return Array.isArray(r)?c.push(...r):r&&c.push(r),0===c.length?[]:c.reduce((e,r)=>{const c=(e,s=null)=>{const r=function(t,s){e.call(this,t,s,o(t,s))};return"number"==typeof s?t(r,s,!0):r},i=(e="",t)=>`${e}||${t.toString()}`,u=(t,r,n,o={})=>{e.push({path:t,signature:i(t,n),options:o,start(){return this.unwatch=s.watch(r,c(n,o.debounce),{deep:!0,...o}),this}})};if("function"==typeof r)u("state",()=>a.state,r,{deep:!0});else if(r&&"object"==typeof r&&"handler"in r){const{handler:e,path:t,paths:s=[],...o}=r;"string"==typeof t?u(t,()=>A(a,t),e,{deep:!0,...o}):s.length>0?u(s.map(e=>[n,e].filter(Boolean).filter(e=>e.length>0).join(".")),s.map(e=>()=>A(a,e)),e,{deep:!0,...o}):u("state",()=>a.state,e,{deep:!0,...o})}return e},[])},ee=(e,t)=>{const s=Pe(e);for(const r of Z(e,t)){const e=s.watchers.find(e=>{const t=e.path===r.path,s=e.signature===r.signature;return t&&s});e&&e.unwatch(),s.watchers.push(r.start())}return s},te=e=>{const{space:t,name:s}=U(e);return void 0!==s?t in K.spaces&&"stores"in K.spaces[t]&&s in K.spaces[t].stores:t in K.spaces},se=e=>{},re=(e,t,...s)=>{const{store:r}=Se(e);if(t in r.actions)try{return r.actions[t](...s)}catch(e){console.error(`Something went wrong with the action '${t}'`),console.error(e)}else console.warn(`Couldn't find the action '${t}' to run.`)},ne=(e,t,...s)=>{const{store:r}=Se(e);if(t in r.getters)try{return"function"==typeof r.getters[t]?r.getters[t](...s):r.getters[t]}catch(e){console.error(`Something went wrong with the getter '${t}'`),console.error(e)}else console.warn(`Couldn't find the getter '${t}' to resolve.`)},oe=(e,t,s)=>{const{space:r,name:n}=U(e),o=Pe({space:r,name:n});return _(o,t,s)},ae=(e,t,s)=>{const r=Pe(e);return w(r,t,s)},ce=(e,t,s,r)=>{const{space:n,name:o}=U(e),a=Pe({space:n,name:o});return A(a,t,s)||r},ie=(e,t,s,r)=>function(){return ce(e,t,s||this,r)},ue=(e,t,s,r)=>{const n=Pe(e);j(n,t,s,r)},pe=(e,t,s)=>function(r){ue(e,t,r,s||this)},fe=(e,t,s,r)=>{const n=Pe(e);T(n,t,s,r)},le=(e,t,s,r)=>{const n=Pe(e);$(n,t,s,r)},de=(e,t,s,r)=>{const n=Pe(e);G(n,t,s,r)},he=(e,t,s)=>{const n=(t,s)=>({get:ie(e,t,s),set:pe(e,t,s)});return Array.isArray(t)?t.reduce((e,t)=>(e[t]=n(t,s),e),{}):r.isObject(t)?Object.keys(t).reduce((e,r)=>(e[r]=n(t[r],s),e),{}):n(t,s)},ye=(e={},{spaces:t={"*":"*"}}={})=>{"function"==typeof e.teddy&&e.teddy(K);const s="*"in t?Object.keys(K.spaces||{}):Object.keys(t);for(const r of s)if("function"==typeof e.space&&e.space(r),r in K.spaces){const s=Object.keys(K.spaces[r].stores||{}),n="*"in t&&"*"===t["*"]?s:t[r];if(Array.isArray(n))for(const t of n)"function"==typeof e.store&&e.store(r,t)}},me=(e=(e=>e))=>({setStore:e(D),makeState:e(q),setState:e(E),applyState:e(B),makeGetters:e(L),setGetters:e(Q),makeActions:e(X),setActions:e(Y),makeWatchers:e(Z),setWatchers:e(ee),exists:e(te),reset:e(se),run:e(re),resolve:e(ne),remove:e(oe),has:e(ae),get:e(ce),getter:e(ie),set:e(ue),setter:e(pe),sync:e(he),push:e(fe),unshift:e(de),insert:e(le)}),ge=(e=M)=>(e in K.spaces||(K.spaces[e]={}),K.spaces[e]),ve=(e=M)=>({store:ge(e),...me(t=>(...s)=>t({space:e,name:N},...s))}),Pe=e=>{const{space:t=M,name:s=N}=U(e);return ge(t),"stores"in K.spaces[t]||(K.spaces[t].stores={}),s in K.spaces[t].stores||(K.spaces[t].stores[s]={getters:{},actions:{},watchers:[],options:{},features:{}},B(0,{},K.spaces[t].stores[s])),K.spaces[t].stores[s]},Se=e=>({store:Pe(e),...me(t=>(...s)=>t(e,...s))}),be=e=>{s.provide(J,Se(e))},ke=()=>{s.inject(C)},Oe=()=>{s.inject(J)},je=e=>{if(r.isObject(e)){const t="get"in e&&"function"==typeof e.get,r="set"in e&&"function"==typeof e.set;return t||r?s.computed(e):Object.keys(e).reduce((t,r)=>(t[r]=s.computed(e[r]),t),{})}return s.computed(e)};var we=Object.freeze({__proto__:null,accessors:z,features:h,Teddy:C,TeddyStore:J,Teddies:K,setStore:D,makeState:q,applyState:B,setState:E,makeGetters:L,setGetters:Q,makeActions:X,setActions:Y,makeWatchers:Z,setWatchers:ee,exists:te,reset:se,run:re,resolve:ne,remove:oe,has:ae,get:ce,getter:ie,set:ue,setter:pe,push:fe,insert:le,unshift:de,sync:he,setFeature:ye,mapMethods:me,getTeddy:ge,useTeddy:ve,getStore:Pe,useStore:Se,provideTeddyStore:be,injectTeddy:ke,injectTeddyStore:Oe,computed:je});return e.Teddies=K,e.Teddy=C,e.TeddyStore=J,e.accessors=z,e.applyState=B,e.computed=je,e.exists=te,e.features=h,e.get=ce,e.getStore=Pe,e.getTeddy=ge,e.getter=ie,e.has=ae,e.injectTeddy=ke,e.injectTeddyStore=Oe,e.insert=le,e.install=e=>{e.prototype.$teddy=we},e.makeActions=X,e.makeGetters=L,e.makeState=q,e.makeWatchers=Z,e.mapMethods=me,e.provideTeddyStore=be,e.push=fe,e.remove=oe,e.reset=se,e.resolve=ne,e.run=re,e.set=ue,e.setActions=Y,e.setFeature=ye,e.setGetters=Q,e.setState=E,e.setStore=D,e.setWatchers=ee,e.setter=pe,e.sync=he,e.unshift=de,e.useStore=Se,e.useTeddy=ve,e}({},debounce,vueCompositionApi,objectStringPath,Vue,equal,fnAnnotate,getHash,stringify);
