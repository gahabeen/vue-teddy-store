/*!
  * vue-teddy-store v0.2.72
  * (c) 2020 Gabin Desserprit
  * @license MIT
  */
/*!
  * vue-teddy-store v0.2.72
  * (c) 2020 Gabin Desserprit
  * @license MIT
  */
var VueTeddyStore=function(e,t,s,r,a,n){"use strict";var o="default"in t?t.default:t;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const c=(e,t)=>`teddy:${e}:${t}`;var i={store(e,t){const s=de({space:e,name:t});if(s.features.cache)return;const r=window.localStorage||global.localStorage||{};if(r){const a=r.getItem(c(e,t));a&&(s.state=JSON.parse(a)),E({space:e,name:t},{handler(s){r.setItem(c(e,t),JSON.stringify(s))},immediate:!0,deep:!0}),s.features.cache=!0}}},u={store(e,s){const r=de({space:e,name:s});r.features.history||(r.features.history={},r.features.history.stack=t.reactive([]),E({space:e,name:s},{handler(e){r.features.history.stack.push({state:e,ts:(new Date).getTime()})},immediate:!0,deep:!0}),r.features.history.installed=!0)}},p={store(e,t){const s=de({space:e,name:t});s.features.sync||(s.features.sync={},window&&window.addEventListener("storage",r=>{r.key===c(e,t)&&(s.state={...s.state,...JSON.parse(r.newValue)})}),s.features.sync.installed=!0)}},d=Object.freeze({__proto__:null,cache:i,history:u,sync:p});function f(e){if(!s.isObject(e)||s.isObject(e)&&!("value"in e))return!1;return"function"==typeof Object.getOwnPropertyDescriptor(e,"value").get}const l=Array.isArray;function h(e,r,a){const n=t.unref(e),o=t.isRef(e);console.log({isRefed:o,obj:e,key:r,value:a}),l(n)&&function(e){const t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}(r)?(n.length=Math.max(n.length,r),o?e.value.splice(r,1,a):e.splice(r,1,a)):s.isValidKey(r)&&s.isObject(n)?o?e.value[r]=a:e[r]=a:o?e.value=a:e=a}function y(e,r){if(s.isObject(e)||Array.isArray(e))return s.isValidKey(r)?t.isRef(e)?r in e.value?e.value[r]:void 0:e[r]:t.isRef(e)?e.value:e}function m(e,t){return!(!s.isObject(e)&&!Array.isArray(e))&&(!!s.isValidKey(t)&&(!!(f(e)&&e.value&&t in e.value)||(!(!e||!(t in e))||void 0)))}function g(e,s){const r=t.unref(e),a=t.isRef(e);if(Array.isArray(r))return a?[...e.value,s]:[...e,s]}function v(e,s){const r=t.unref(e),a=t.isRef(e);if(Array.isArray(r))return a?(e.value.unshift(s),e.value):(e.unshift(s),e)}function P(e=[]){return"_state"!==e[0]?["_state",...e]:e}const S=s.makeSet({setProp:h,getProp:y,hasProp:m,afterGetSteps:P}),k=s.makeHas({getProp:y,hasProp:m,afterGetSteps:P}),b=s.makeGet({getProp:y,hasProp:m,afterGetSteps:P}),j=s.makeRemove({getProp:y,hasProp:m,removeProp:function(e,r){const a=t.unref(e),n=t.isRef(e);return Array.isArray(a)?(n?e.value.splice(+r,1):e.splice(+r,1),!0):!!s.isObject(a)&&(n?e.value=function(e,t=[]){return Object.keys(e).reduce((s,r)=>(t.includes(r)||(s[r]=e[r]),s),{})}(e.value,[r]):delete e[r],!0)},afterGetSteps:P}),O=s.makePush({setProp:h,getProp:y,hasProp:m,pushProp:g,afterGetSteps:P}),w=s.makeUnshift({setProp:h,getProp:y,hasProp:m,unshiftProp:v,afterGetSteps:P}),A=s.makeSet({setProp:h,getProp:y,hasProp:m}),_=s.makeHas({getProp:y,hasProp:m}),T=s.makeGet({getProp:y,hasProp:m}),G=s.makeRemove({getProp:y,hasProp:m}),R=s.makePush({setProp:h,getProp:y,hasProp:m,pushProp:g}),$=s.makeUnshift({setProp:h,getProp:y,hasProp:m,unshiftProp:v});var V=Object.freeze({__proto__:null,teddySet:S,teddyHas:k,teddyGet:b,teddyRemove:j,teddyPush:O,teddyUnshift:w,set:A,has:_,get:T,remove:G,push:R,unshift:$});r.use(o);const W=Symbol(),x=Symbol(),F={__options:{devtools:!0},spaces:{}},M="$",z="@",H=e=>{let t,r;if(s.isObject(e))t="space"in e?e.space:M,r="name"in e?e.name:z;else if("string"==typeof e)if(e.includes(".")){let[s,a]=e.split(".");t=s,r=a}else if(e.includes("/")){let[s,a]=e.split("/");t=s,r=a}else t=M,r=e;return"string"==typeof t&&(t=t.trim(),0===t.length&&(t=void 0)),"string"==typeof r&&(r=r.trim(),0===r.length&&(r=void 0)),{space:t,name:r}},J=(e,t)=>{const s=H(e);t=t||{};const r=de(s);return U(s,t.state),D(s,t.getters),q(s,t.actions),E(s,t.watchers),r},K=(e,s)=>t.isRef(s)?s:t.ref(s),N=(e,t,s={})=>(s._state=K(0,t),"state"in s||Object.defineProperty(s,"state",{get:()=>s._state.value,set:e=>{s._state.value=e},enumerable:!0}),s),U=(e,t)=>{const s=de(e);N(0,t,s)},C=(e,t)=>{const s=de(e);return t=t||{},Object.keys(t).reduce((e,r)=>(f(t[r])?e[r]=t[r]:"function"==typeof t[r]&&(e[r]=me(()=>t[r](s))),e),{})},D=(e,t)=>{const s=de(e);return s.getters={...s.getters||{},...C(e,t)},s},I=(e,t)=>{const s=de(e);return t=t||{},Object.keys(t).reduce((e,r)=>("function"==typeof t[r]&&(e[r]=(...e)=>t[r](s,...e)),e),{})},q=(e,t)=>{const s=de(e);return s.actions={...s.actions||{},...I(e,t)},s},B=(e,s)=>{const{name:r}=H(e),o=de(e),c=[];return Array.isArray(s)?c.push(...s):s&&c.push(s),0===c.length?[]:c.reduce((e,s)=>{const c=(e,t=null)=>{const s=function(t,s){e.call(this,t,s,n(t,s))};return"number"==typeof t?a(s,t,!0):s},i=(e="",t)=>`${e}||${t.toString()}`,u=(s,r,a,n={})=>{e.push({path:s,signature:i(s,a),options:n,start(){return this.unwatch=t.watch(r,c(a,n.debounce),{deep:!0,...n}),this}})};if("function"==typeof s)u("state",()=>o.state,s,{deep:!0});else if(s&&"object"==typeof s&&"handler"in s){const{handler:e,path:t,paths:a=[],...n}=s;"string"==typeof t?u(t,()=>b(o,t),e,{deep:!0,...n}):a.length>0?u(a.map(e=>[r,e].filter(Boolean).filter(e=>e.length>0).join(".")),a.map(e=>()=>b(o,e)),e,{deep:!0,...n}):u("state",()=>o.state,e,{deep:!0,...n})}return e},[])},E=(e,t)=>{const s=de(e);for(const r of B(e,t)){const e=s.watchers.find(e=>{const t=e.path===r.path,s=e.signature===r.signature;return t&&s});e&&e.unwatch(),s.watchers.push(r.start())}return s},L=e=>{const{space:t,name:s}=H(e);return void 0!==s?t in F.spaces&&"stores"in F.spaces[t]&&s in F.spaces[t].stores:t in F.spaces},Q=e=>{},X=(e,t,...s)=>{const{store:r}=fe(e);if(t in r.actions)try{return r.actions[t](...s)}catch(e){console.error(`Something went wrong with the action '${t}'`),console.error(e)}else console.warn(`Couldn't find the action '${t}' to run.`)},Y=(e,t,s)=>{const{space:r,name:a}=H(e),n=de({space:r,name:a});return j(n,t,s)},Z=(e,t,s)=>{const r=de(e);return k(r,t,s)},ee=(e,t,s,r)=>{const{space:a,name:n}=H(e),o=de({space:a,name:n});return b(o,t,s)||r},te=(e,t,s,r)=>function(){return ee(e,t,s||this,r)},se=(e,t,s,r)=>{const a=de(e);S(a,t,s,r)},re=(e,t,s)=>function(r){se(e,t,r,s||this)},ae=(e,t,s,r)=>{const a=de(e);O(a,t,s,r)},ne=(e,t,s,r)=>{const a=de(e);w(a,t,s,r)},oe=(e,t,r)=>{const a=(t,s)=>({get:te(e,t,s),set:re(e,t,s)});return Array.isArray(t)?t.reduce((e,t)=>(e[t]=a(t,r),e),{}):s.isObject(t)?Object.keys(t).reduce((e,s)=>(e[s]=a(t[s],r),e),{}):a(t,r)},ce=(e={})=>{"function"==typeof e.teddy&&e.teddy(F);for(const t of Object.keys(F.spaces||{})){"function"==typeof e.space&&e.space(t);for(const s of Object.keys(F.spaces[t].stores||{}))"function"==typeof e.store&&e.store(t,s)}},ie=(e=(e=>e))=>({setStore:e(J),makeState:e(K),setState:e(U),applyState:e(N),makeGetters:e(C),setGetters:e(D),makeActions:e(I),setActions:e(q),makeWatchers:e(B),setWatchers:e(E),exists:e(L),reset:e(Q),run:e(X),remove:e(Y),has:e(Z),get:e(ee),getter:e(te),set:e(se),setter:e(re),sync:e(oe),push:e(ae),unshift:e(ne)}),ue=(e=M)=>(e in F.spaces||(F.spaces[e]={}),F.spaces[e]),pe=(e=M)=>({store:ue(e),...ie(t=>(...s)=>t({space:e,name:z},...s))}),de=e=>{const{space:t=M,name:s=z}=H(e);return ue(t),"stores"in F.spaces[t]||(F.spaces[t].stores={}),s in F.spaces[t].stores||(F.spaces[t].stores[s]={getters:{},actions:{},watchers:[],options:{},features:{}},N(0,{},F.spaces[t].stores[s])),F.spaces[t].stores[s]},fe=e=>({store:de(e),...ie(t=>(...s)=>t(e,...s))}),le=e=>{t.provide(x,fe(e))},he=()=>{t.inject(W)},ye=()=>{t.inject(x)},me=e=>{if(s.isObject(e)){const s="get"in e&&"function"==typeof e.get,r="set"in e&&"function"==typeof e.set;return s||r?t.computed(e):Object.keys(e).reduce((s,r)=>(s[r]=t.computed(e[r]),s),{})}return t.computed(e)};var ge=Object.freeze({__proto__:null,accessors:V,features:d,Teddy:W,TeddyStore:x,Teddies:F,setStore:J,makeState:K,applyState:N,setState:U,makeGetters:C,setGetters:D,makeActions:I,setActions:q,makeWatchers:B,setWatchers:E,exists:L,reset:Q,run:X,remove:Y,has:Z,get:ee,getter:te,set:se,setter:re,push:ae,unshift:ne,sync:oe,setFeature:ce,mapMethods:ie,getTeddy:ue,useTeddy:pe,getStore:de,useStore:fe,provideTeddyStore:le,injectTeddy:he,injectTeddyStore:ye,computed:me});return e.Teddies=F,e.Teddy=W,e.TeddyStore=x,e.accessors=V,e.applyState=N,e.computed=me,e.exists=L,e.features=d,e.get=ee,e.getStore=de,e.getTeddy=ue,e.getter=te,e.has=Z,e.injectTeddy=he,e.injectTeddyStore=ye,e.install=e=>{e.prototype.$teddy=ge},e.makeActions=I,e.makeGetters=C,e.makeState=K,e.makeWatchers=B,e.mapMethods=ie,e.provideTeddyStore=le,e.push=ae,e.remove=Y,e.reset=Q,e.run=X,e.set=se,e.setActions=q,e.setFeature=ce,e.setGetters=D,e.setState=U,e.setStore=J,e.setWatchers=E,e.setter=re,e.sync=oe,e.unshift=ne,e.useStore=fe,e.useTeddy=pe,e}({},vueCompositionApi,objectStringPath,Vue,debounce,equal);
