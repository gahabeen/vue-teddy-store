/*!
  * vue-teddy-store v0.2.35
  * (c) 2020 Gabin Desserprit
  * @license MIT
  */
/*!
  * vue-teddy-store v0.2.35
  * (c) 2020 Gabin Desserprit
  * @license MIT
  */
var VueTeddyStore=function(e,t,s,r,a){"use strict";var n="default"in t?t.default:t;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;const o=(e,t)=>`teddy:${e}:${t}`;var c={store(e,t){const s=ee({space:e,name:t});if(s.features.cache)return;const r=window.localStorage||global.localStorage||{};if(r){const a=r.getItem(o(e,t));a&&(s.state=JSON.parse(a)),D({space:e,name:t},{handler(s){r.setItem(o(e,t),JSON.stringify(s))},immediate:!0,deep:!0}),s.features.cache=!0}}},i={store(e,s){const r=ee({space:e,name:s});r.features.history||(r.features.history={},r.features.history.stack=t.reactive([]),D({space:e,name:s},{handler(e){r.features.history.stack.push({state:e,ts:(new Date).getTime()})},immediate:!0,deep:!0}),r.features.history.installed=!0)}},u={store(e,t){const s=ee({space:e,name:t});s.features.sync||(s.features.sync={},window&&window.addEventListener("storage",e=>{e.key===o(t)&&(s.state={...s.state,...JSON.parse(e.newValue)})}),s.features.sync.installed=!0)}},p=Object.freeze({__proto__:null,cache:c,history:i,sync:u});function d(e){if(!s.isObject(e)||s.isObject(e)&&!("value"in e))return!1;return"function"==typeof Object.getOwnPropertyDescriptor(e,"value").get}const l={};function y(e,t,r){return s.isValidKey(t)&&(s.isObject(e)||Array.isArray(e))?d(e)&&"value"in e&&t in e.value?(e.value[t]=r,e.value[t]):Array.isArray(e)?(e.splice(+t,1,r),e[t]):s.isObject(e)?(e[t]=r,e[t]):void 0:e&&null==t?(d(e)&&"value"in e?e.value=r:s.isObject(r)?Object.assign(e,r):e=r,e):void console.log("Couldn't not set "+t)}function f(e,t){return s.isValidKey(t)?d(e)?t in e.value?e.value[t]:e.value:s.isObject(e)||Array.isArray(e)?e[t]:void 0:e&&void 0===t?d(e)?e.value:e:void 0}function h(e,t){return!(!s.isObject(e)&&!Array.isArray(e))&&(!!s.isValidKey(t)&&(!!(d(e)&&e.value&&t in e.value)||(!(!e||!(t in e))||void 0)))}function m(e=[]){return["_state",...e]}const g=s.makeSet({setProp:y,getProp:f,hasProp:h,afterGetSteps:m}),v=s.makeHas({getProp:f,hasProp:h,afterGetSteps:m}),S=(e,t,a)=>((e,t="",s={},a=(()=>null))=>{const n=r(JSON.parse(JSON.stringify(e))),o=`${t}//${r(s)}`;if(n in l&&l[n].has(o))return l[n].get(o);{n in l||(l[n]=new Map);const r=a(e,t,s);return l[n].set(o,r),r}})(e,t,a,s.makeGet({getProp:f,hasProp:h,afterGetSteps:m})),j=s.makeSet({setProp:y,getProp:f,hasProp:h}),O=s.makeHas({getProp:f,hasProp:h}),b=s.makeGet({getProp:f,hasProp:h});var k=Object.freeze({__proto__:null,teddySet:g,teddyHas:v,teddyGet:S,set:j,has:O,get:b});a.use(n);const w=Symbol(),A=Symbol(),P={__options:{devtools:!0},spaces:{}},T="$",_="@",G=e=>{let t,r;if(s.isObject(e))t="space"in e?e.space:T,r="name"in e?e.name:_;else if("string"==typeof e){if(e.includes(".")){let[s,a]=e.split(".");t=s,r=a}else if(e.includes("/")){let[s,a]=e.split("/");t=s,r=a}else t=T,r=e;console.log("parseDefinition",e,{space:t,name:r})}return"string"==typeof t&&(t=t.trim(),0===t.length&&(t=void 0)),"string"==typeof r&&(r=r.trim(),0===r.length&&(r=void 0)),{space:t,name:r}},$=(e,t)=>{const s=G(e);t=t||{};const r=ee(s);return J(s,t.state),H(s,t.getters),z(s,t.actions),D(s,t.watchers),r},V=(e,s)=>t.isRef(s)?s:t.ref(s),W=(e,t,s={})=>(s._state=V(0,t),"state"in s||Object.defineProperty(s,"state",{get:()=>s._state.value,set:e=>{s._state.value=e},enumerable:!0}),s),J=(e,t)=>{const s=ee(e);W(0,t,s)},N=(e,t)=>{const s=ee(e);return t=t||{},Object.keys(t).reduce((e,r)=>(d(t[r])?e[r]=t[r]:"function"==typeof t[r]&&(e[r]=ne(()=>t[r](s))),e),{})},H=(e,t)=>{const s=ee(e);return s.getters={...s.getters||{},...N(e,t)},s},x=(e,t)=>{const s=ee(e);return t=t||{},Object.keys(t).reduce((e,r)=>("function"==typeof t[r]&&(e[r]=(...e)=>t[r](s,...e)),e),{})},z=(e,t)=>{const s=ee(e);return s.actions={...s.actions||{},...x(e,t)},s},C=(e,s)=>{const{name:r}=G(e),a=ee(e),n=[];return Array.isArray(s)?n.push(...s):s&&n.push(s),0===n.length?[]:n.reduce((e,s)=>{const n=(s,r,a,n)=>{const o=t.watch(r,a,{deep:!0,...n});e.push({path:s,handler:a,options:n,unwatch:o})};if("function"==typeof s)n("state",()=>a.state,s,{deep:!0});else if(s&&"object"==typeof s&&"handler"in s){const{handler:e,path:t,paths:o=[],...c}=s,i=e=>function(t,s){(void 0!==t&&void 0!==s||t!==s)&&e.call(this,t,s)};"string"==typeof t?n(t,()=>S(a,t),i(e),{deep:!0,...c}):o.length>0?n(o.map(e=>[r,e].filter(Boolean).filter(e=>e.length>0).join(".")),o.map(e=>()=>S(a,e)),i(e),{deep:!0,...c}):n("state",()=>a.state,i(e),{deep:!0,...c})}return e},[])},D=(e,t)=>{const s=ee(e);return s.watchers=[...s.watchers||[],...C(e,t)],s},K=e=>{const{space:t,name:s}=G(e);return void 0!==s?t in P.spaces&&"stores"in P.spaces[t]&&s in P.spaces[t].stores:t in P.spaces},M=e=>{const{space:t,name:s}=G(e),r=Y(t);s in r.stores&&delete r.stores[s]},F=e=>{},I=(e,t,...s)=>{const{store:r}=te(e);if(t in r.actions)try{return r.actions[t](...s)}catch(e){console.error(`Something went wrong with the action '${t}'`),console.error(e)}else console.warn(`Couldn't find the action '${t}' to run.`)},B=(e,t,s)=>{const r=ee(e);return v(r,t,s)},E=(e,t,s,r)=>{const a=ee(e);return S(a,t,s)||r},L=(e,t,s,r)=>function(){return E(e,t,s||this,r)},R=(e,t,s,r)=>{const a=ee(e);g(a,t,s,r)},q=(e,t,s)=>function(r){R(e,t,r,s||this)},Q=(e,t,r)=>{const a=(t,s)=>({get:L(e,t,s),set:q(e,t,s)});return Array.isArray(t)?t.reduce((e,t)=>(e[t]=a(t,r),e),{}):s.isObject(t)?Object.keys(t).reduce((e,s)=>(e[s]=a(t[s],r),e),{}):a(t,r)},U=(e={})=>{"function"==typeof e.teddy&&e.teddy(P);for(const t of Object.keys(P.spaces||{})){"function"==typeof e.space&&e.space(t);for(const s of Object.keys(P.spaces[t].stores||{}))"function"==typeof e.store&&e.store(t,s)}},X=(e=(e=>e))=>({setStore:e($),makeState:e(V),setState:e(J),applyState:e(W),makeGetters:e(N),setGetters:e(H),makeActions:e(x),setActions:e(z),makeWatchers:e(C),setWatchers:e(D),exists:e(K),remove:e(M),reset:e(F),run:e(I),has:e(B),get:e(E),getter:e(L),set:e(R),setter:e(q),sync:e(Q)}),Y=(e=T)=>(e in P.spaces||(P.spaces[e]={}),P.spaces[e]),Z=(e=T)=>({store:Y(e),...X(t=>(...s)=>t({space:e,name:_},...s))}),ee=e=>{const{space:t=T,name:s=_}=G(e);return Y(t),"stores"in P.spaces[t]||(P.spaces[t].stores={}),s in P.spaces[t].stores||(P.spaces[t].stores[s]={getters:{},actions:{},watchers:[],options:{},features:{}},W(0,{},P.spaces[t].stores[s])),P.spaces[t].stores[s]},te=e=>({store:ee(e),...X(t=>(...s)=>t(e,...s))}),se=e=>{t.provide(A,te(e))},re=()=>{t.inject(w)},ae=()=>{t.inject(A)},ne=e=>{if(s.isObject(e)){const s="get"in e&&"function"==typeof e.get,r="set"in e&&"function"==typeof e.set;return s||r?t.computed(e):Object.keys(e).reduce((s,r)=>(s[r]=t.computed(e[r]),s),{})}return t.computed(e)};var oe=Object.freeze({__proto__:null,accessors:k,features:p,Teddy:w,TeddyStore:A,Teddies:P,setStore:$,makeState:V,applyState:W,setState:J,makeGetters:N,setGetters:H,makeActions:x,setActions:z,makeWatchers:C,setWatchers:D,exists:K,remove:M,reset:F,run:I,has:B,get:E,getter:L,set:R,setter:q,sync:Q,setFeature:U,mapMethods:X,getTeddy:Y,useTeddy:Z,getStore:ee,useStore:te,provideTeddyStore:se,injectTeddy:re,injectTeddyStore:ae,computed:ne});return e.Teddies=P,e.Teddy=w,e.TeddyStore=A,e.accessors=k,e.applyState=W,e.computed=ne,e.exists=K,e.features=p,e.get=E,e.getStore=ee,e.getTeddy=Y,e.getter=L,e.has=B,e.injectTeddy=re,e.injectTeddyStore=ae,e.install=e=>{e.prototype.$teddy=oe},e.makeActions=x,e.makeGetters=N,e.makeState=V,e.makeWatchers=C,e.mapMethods=X,e.provideTeddyStore=se,e.remove=M,e.reset=F,e.run=I,e.set=R,e.setActions=z,e.setFeature=U,e.setGetters=H,e.setState=J,e.setStore=$,e.setWatchers=D,e.setter=q,e.sync=Q,e.useStore=te,e.useTeddy=Z,e}({},vueCompositionApi,objectStringPath,getHash,Vue);
